<!DOCTYPE html>
<html>
<head>
    <title>Registro de Entrada y Salida</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="styles.css"> <!-- Vincula el archivo CSS -->
</head>
<body>
    <!-- Contenedor principal -->
    <div class="container">
		 <table width="100%" border="0">
			<tr>
			  <td width="15%"><img src="Imagenes/WhatsApp Image 2023-08-10 at 3.58.40 PM.jpeg" width="100%" height="100%" alt=""/></td>
			  <td align="center"><h1>Jornadas 2023</h1><br>
				<h2 align="center">¡Bienvenidos!</h2></td>
			</tr>
		</table>
        <div id="mensaje" style="display: none;">
            <div id="mensaje-contenido"></div>
            <button id="mensaje-cerrar" class="mensaje-cerrar">x</button>
        </div>
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                // Obtener el valor del parámetro "mensaje" en la URL
                const urlParams = new URLSearchParams(window.location.search);
                const tipoMensaje = urlParams.get("tipo");
                const mensaje = urlParams.get("mensaje");

                // Mostrar el mensaje en un elemento con el id "mensaje"
                if (mensaje) {
                    const mensajeElement = document.querySelector("#mensaje");
                    mensajeElement.style.display = "block"; // Mostrar el elemento si hay un mensaje

                    // Agregar el contenido y la clase correspondiente al tipo de mensaje
                    const mensajeContenido = document.querySelector("#mensaje-contenido");
                    mensajeContenido.textContent = mensaje;

                    if (tipoMensaje === "exito") {
                        mensajeElement.classList.add("mensaje-aceptado");
                    } else if (tipoMensaje === "error") {
                        mensajeElement.classList.add("mensaje-error");
                    }

                    // Agregar evento de cierre al botón "x"
                    const mensajeCerrar = document.querySelector("#mensaje-cerrar");
                    mensajeCerrar.addEventListener("click", function() {
                        mensajeElement.style.display = "none";
                    });
                }
            });
        </script>

        <!-- Título dinámico que se actualizará según la hora -->
        <h1 align="center" id="titulo">Registro de Entrada y Salida</h1>

        <!-- Formulario de registro -->
        <form action="registrar.php" method="POST">
            <label for="numero_control">Numero de Control:</label>
            <br> <!-- Agregamos un salto de línea para separar el formulario de los botones -->

            <input type="text" name="numero_control" id="numero_control" required>
            <!-- Mostrar la hora actual -->
            <p>Hora actual: <span id="hora_actual"></span></p>
            <br> <!-- Agregamos un salto de línea para separar el formulario de los botones -->
            <button class="boton-accion" type="submit" name="accion" value="entrada">Registrar Entrada</button>
            <br> <!-- Agregamos un salto de línea para separar el formulario de los botones -->
            <button class="boton-accion" type="submit" name="accion" value="salida">Registrar Salida</button>
        </form>

        
    </div>
    
    <!-- Script de JavaScript para cambiar el título dinámicamente y mostrar la hora -->
    <script>
        // Función para actualizar el título dinámicamente
        function actualizarTitulo() {
            var ahora = new Date();
            var hora = ahora.getHours();

            // Obtener el elemento del título por su ID
            var titulo = document.getElementById("titulo");

            // Cambiar el contenido del título según la hora del día
            if (hora >= 0 && hora < 12) {
                titulo.textContent = "Buenos días Registro de Entrada y Salida";
            } else if (hora >= 12 && hora < 18) {
                titulo.textContent = "Buenas tardes Registro de Entrada y Salida";
            } else {
                titulo.textContent = "Buenas noches Registro de Entrada y Salida";
            }
        }

        // Función para mostrar la hora actual en el formulario
        function mostrarHoraActual() {
            var ahora = new Date();
            var hora = ahora.getHours();
            var minutos = ahora.getMinutes();
            var segundos = ahora.getSeconds();

            // Formatear la hora actual
            var horaFormateada = hora + ":" + minutos + ":" + segundos;

            // Obtener el elemento para mostrar la hora por su ID
            var horaActual = document.getElementById("hora_actual");

            // Mostrar la hora formateada en el elemento
            horaActual.textContent = horaFormateada;
        }

        

        // Llamar a las funciones al cargar la página
        actualizarTitulo();
        mostrarHoraActual();

        // Actualizar la hora cada segundo
        setInterval(mostrarHoraActual, 1000);
    </script>
</body>
</html>
